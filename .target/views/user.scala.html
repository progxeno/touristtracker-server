@(users: List[models.User], stringForm: Form[String], GPSLogs: List[models.GPSLog])
@import helper._
@import models.User
@import models.GPSLog
@main("User list") {
<div class="well well-lg">
   <h1>The Tracking App <span class="label label-default">Analyze</span></h1>
   <a href="@routes.Application.logout()" class="btn btn-warning" style = "float: right">Logout</a>
   <!-- Button trigger modal -->
   <button class="btn btn-default" style = "float: right" data-toggle="modal" href="/registerNewUser"	" data-target="#myModal0" >
   Add New User
   </button>
   <!-- Modal -->
   <div class="modal fade" id="myModal0" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" style="width:60%">
         <div class="modal-content">
         </div>
      </div>
   </div>
   <h2>The Database</h2>
</div>
<div class="alert alert-success">
   <ul class="list-group" style="width:20%;">
      <li class="list-group-item">
         <span class="badge alert-info" style="font-size: 12pt;">@users.size()</span>
         <b>Tracked Tourists</b>
      </li>
   </ul>
</div>
<ul>
   <div style = "margin:0 auto">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist" style = "width:49%;">
         <li class="active"><a href="#home" role="tab" data-toggle="tab">User List</a></li>
         <li><a href="#filter" role="tab" data-toggle="tab">Filter Options</a></li>
      </ul>
      <div class="tab-content">
         <div class="tab-pane active" id="home">
            <div class="panel panel-default" style = "width:49%; float:left">
               <!-- Default panel contents -->
               <div class="panel-heading">Registred Users</div>
               <div style=" height: 400px; width:100%; overflow:auto;">
                  <!-- Table -->
                  <table class="table table-striped table-condensed">
                     <tr>
                        <th>Year of Birth</th>
                        <th>Country<br>Zipcode</th>
                        <th>Total<br>Dist</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Returner</th>
                        <th>Ratings</th>
                        <th>LÃ¶schen</th>
                     </tr>
                     @for(user <- users) {
                     <tr>
                        <td>
                           <button type="button" class="btn btn-default" style ="width: 90%" data-toggle="tooltip"
                              data-placement="left" title="@user.email">
                           @if(user.gender == true){
                           <i class="glyphicon-male"></i>
                           }
                           @if(user.gender == false){
                           <i class="glyphicon-female"></i>
                           }
                           &nbsp;@user.year
                           </button>
                        </td>
                        <td>
                           <button type="button" class="btn btn-default" style ="width: 90%" data-toggle="tooltip"
                              data-placement="left">@user.country&nbsp;@user.zipcode</button>
                        </td>
                        <td>
                           <!-- Button trigger modal -->
                           <button class="btn btn-default" style ="width: 100%" data-toggle="modal" href="/Distance/@user.userid/singledistance"	data-target="#myModal2">
                           @user.dTotalDist</button>
                           <!-- Modal -->
                           <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
                              <div class="modal-dialog" style="width:90%">
                                 <div class="modal-content">
                                 </div>
                              </div>
                           </div>
                        </td>
                        <td>@user.dateFrom</td>
                        <td>@user.dateTo</td>
                        <td>
                           @if(user.returner == true){
                           <span class="glyphicon glyphicon-ok-circle"></span>
                           }
                           @if(user.returner == false){
                           <span class="glyphicon glyphicon-remove-circle"></span>
                           }
                        </td>
                        <td>
                           <!-- Button trigger modal -->
                           <button class="btn btn-default" data-toggle="modal" href="/displayRating/@user.userid/rating"	" data-target="#myModal1">
                           <span class="glyphicon glyphicon-pencil"></span>
                           </button>
                           <!-- Modal -->
                           <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                              <div class="modal-dialog" style="width:90%">
                                 <div class="modal-content">
                                 </div>
                              </div>
                           </div>
                        </td>
                        <td>
                           @form(routes.Application.delete(user.id)) {
                           <button class="btn btn-default" onclick="return confirm('Are you sure that you want to delete all the collected data of the User?')">
                           <i class="glyphicon-delete-point"></i>        }
                           </button>
                        </td>
                     </tr>
                     }
                  </table>
               </div>
            </div>
         </div>
         <div class="tab-pane" id="filter">
            <div class="panel panel-default" style = "width:49%; float:left">
               <div class="panel-heading">Select Filter</div>
               <div style = "margin:0 auto">
                  @form(routes.Application.filter()) {
                  @inputText(stringForm("email"),'_label -> "E-Mail")
                  <div style = "margin:0 auto">
                     <div  style = " float:left">     
                        @inputText(stringForm("year1"),'_label -> "Year From")
                     </div>
                     <div style = "float:right; width:70%">  
                        @inputText(stringForm("year2"),'_label -> "Year To")
                     </div>
                  </div>
                  <div style = "margin:0 auto">
                     <div  style = " float:left">     
                        @inputDate(stringForm("date1"),'_label -> "Date From")
                     </div>
                     <div style = "float:right; width:70%">  
                        @inputDate(stringForm("date2"),'_label -> "Date To")
                     </div>
                  </div>
                  <div style = "margin:0 auto">
                     <div  style = " float:left">    
                        @inputText(stringForm("country"),'_label -> "Country (Shortcut)")
                     </div>
                     <div style = "float:right; width:70%"> 
                        @inputText(stringForm("zipcode"),'_label -> "Zip Code")
                     </div>
                     <dt><label>Select</label></dt>
                     <div style = "margin:0 auto">
                        <div  style = " float:left; width:10%">
                           @checkbox(stringForm("male"),'_label -> "Male")
                        </div>
                        <div style = "float:left; width:40%">
                           @checkbox(stringForm("female"),'_label -> "Female")
                        </div>
                        <div style = "float:left; width:50%"> 	  	
                           @checkbox(stringForm("returner"),'_label -> "Returner" )
                        </div>
                     </div>
                     <dt><label>Select Vehicle</label></dt>
                     <div style = "margin:0 auto">
                        <div  style = " float:left; width:25%">
                           @checkbox(stringForm("vehicle"),'_label -> "Car")
                        </div>
                        <div style = "float:left; width:25%">
                           @checkbox(stringForm("footbike"),'_label -> "Foot/Bike")
                        </div>
                        <div style = "float:left; width:25%"> 	  	
                           @checkbox(stringForm("ship"),'_label -> "Ship" )	
                        </div>
                        <div style = "float:left; width:25%"> 	  	
                           @checkbox(stringForm("bustrain"),'_label -> "Bus/Train" )
                        </div>
                     </div>
                     <input type="submit" value="Filter" style = "float:left; width:40%">
                     }
</ul>
</div>
</div>
</div>
</div>
<div class="modal hide" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false">
<div class="modal-header">
<h1>Processing...</h1>
</div>
<div class="modal-body">
<div class="progress progress-striped active">
<div class="bar" style="width: 100%;"></div>
</div>
</div>
</div>
</div>
<div class="panel panel-default" style = "width:49%; float:right; height: 443px;">
<head>
<meta charset="utf-8"/>
<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
</head>
<body>
<div id="pos" style="width:100%; height: 100%;">
</div>
<script>
   function initialize() {
   var mapOptions = {
     center: new google.maps.LatLng(47.6604704, 9.171972),
     zoom: 10,
     mapTypeId: google.maps.MapTypeId.ROADMAP
   };
   
   var map = new google.maps.Map(document.getElementById("pos"),
       mapOptions);
       
       
     
   $(document).ready(function(){
     var colorCounter = 0;
   @for(user <- users) {
   // add loading image to div
   $('#pleaseWaitDialog');
   
   // run ajax request
   $.ajax({
     type: "GET",
     dataType: "json",
     url: "/rout/@user.userid/getRout",
     success: function (rout) {
     
     		
     		
            var json = JSON.parse(rout);
            var userMap = "@user.userid";
     
     				for (var i = 0; i < json.length; i++) {
     				
			    		var f=[];
   		  				var c=[];
   		  				var b=[];
   		  				var s=[];
     		
     			 /**
     			 		if(i >= 1 && json[i].vehicle != json[i-1].vehicle){
   				       			 				
     			 				switch(json[i].vehicle) {
  								 case 0:
      								f.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
      								break;
   								 case 1:
      								c.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
      								break;
          						 case 2:
      								b.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
      								break;
          						 case 3:
      								s.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
      								break;
   								}//end switch
     	  				}//end if
     	  		**/
     	  		
     	  		
     	  if(json[i].vehicle == 0) {
   
   			if(i>=1){
     	  			f.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
     	  		}
   				f.push(new google.maps.LatLng(json[i].latitude, json[i].longitude));
   		};
   	
   	var footBike = new google.maps.Polyline({       
       path: f, 
       geodesic: true,
       // BLUE    
       strokeColor: '#008000',
       strokeOpacity: 1.0,
       strokeWeight: 2
     });
   
     userMap = new google.maps.Polyline(footBike);
     userMap.setMap(map);				  
   	
   	// BLACK 
     	  if(json[i].vehicle == 1) { 
     	  		if(i>=1){
     	  			c.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
     	  		}
   				c.push(new google.maps.LatLng(json[i].latitude, json[i].longitude));
   	};
   	
   	var car = new google.maps.Polyline({
       path: c,
       geodesic: true,
       // BLACK     
       strokeColor: '#FF0000',
       strokeOpacity: 1.0,
       strokeWeight: 2
     });
   	
     userMap = new google.maps.Polyline(car);
     userMap.setMap(map);
    
   
   	
   	// GREEN  
     	  if(json[i].vehicle == 2) { 
     	  		if(i>=1){
     	  			b.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
     	  		}
   				b.push(new google.maps.LatLng(json[i].latitude, json[i].longitude));
   	};
   	var busTrain = new google.maps.Polyline({
       path: b,
       geodesic: true,
       // GREEN
       strokeColor: '#FFFF00',
       strokeOpacity: 1.0,
       strokeWeight: 2
     });
   
     userMap = new google.maps.Polyline(busTrain);
     userMap.setMap(map);
     
   	// RED  
     	  if(json[i].vehicle == 3) {
     	  		if(i>=1){
     	  			s.push(new google.maps.LatLng(json[i-1].latitude, json[i-1].longitude));
     	  		}
   				s.push(new google.maps.LatLng(json[i].latitude, json[i].longitude));
   	};
     var ferry = new google.maps.Polyline({
       path: s,
       geodesic: true,
       // RED     
       strokeColor: '#FFA500',
       strokeOpacity: 1.0,
       strokeWeight: 2
     });
     
     
     userMap = new google.maps.Polyline(ferry);
     userMap.setMap(map);  
     						
     				
     				
   	//rout.push(new google.maps.LatLng(json[i].latitude, json[i].longitude));
   	
   }//end for
   
     }//end function
     
     
   });//end $.ajax
   
   };//end for(user <- users) 
   
   });//end $(document).ready(function()
   
   
   
   
       
       
   };//end initialize();
   
       initialize();
   
   
           
   
</script>
</body>
</div>
</div>
</ul>
}